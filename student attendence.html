<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HS ATTENDANCE SYSTEM - Attendance</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Top Navbar -->
  <nav class="navbar navbar-dark bg-primary fixed-top" style="height: 56px;">
    <div class="container-fluid">
      <button class="btn btn-outline-light d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar">
        <i class="bi bi-list"></i>
      </button>
      <a class="navbar-brand" href="#">HINDU SHIKSHA SAMITI</a>
      <form class="d-flex" role="search">
        <button class="btn btn-sm btn-outline-light me-2" type="button">Admission Query</button>
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-sm btn-light" type="submit">Submit</button>
      </form>
    </div>
  </nav>

  <!-- Sidebar (Offcanvas) -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarLabel">Menu</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="dashboard.html">
            <i class="bi bi-house-door me-2"></i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="STUDENTS.html">
            <i class="bi bi-person me-2"></i> Profile
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="attendance.html">
            <i class="bi bi-calendar-check me-2"></i> Attendance
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reports.html">
            <i class="bi bi-file-earmark-text me-2"></i> Reports
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Sidebar (Minimal) -->
  <div class="d-none d-md-block bg-light sidebar position-fixed" style="width: 220px; top: 56px; left: 0; z-index: 1030; height: calc(100vh - 56px);">
    <ul class="nav flex-column pt-3">
      <li class="nav-item">
        <a class="nav-link" href="dashboard.html">
          <i class="bi bi-house-door me-2"></i> Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="STUDENTS.html">
          <i class="bi bi-person me-2"></i> Profile
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="attendance.html">
          <i class="bi bi-calendar-check me-2"></i> Attendance
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="reports.html">
          <i class="bi bi-file-earmark-text me-2"></i> Reports
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <main class="content pt-5" style="margin-left: 220px;">
    <div class="container mt-4">
      <div class="card mb-4">
        <div class="card-header position-relative">
          <h5 class="card-title mb-0">Attendance Dashboard</h5>
          <p class="card-text mb-0">Overview of attendance for the current week</p>
          <!-- Upcoming Holiday Badge (top-right) -->
          <div style="position: absolute; top: 1rem; right: 1rem;">
            <span class="badge bg-warning text-dark fs-6">
              Next Holiday: Independence Day <i class="bi bi-calendar-event ms-1"></i><br>
              <span class="fw-bold">15 Aug 2025</span>
            </span>
          </div>
          <!-- End Upcoming Holiday Badge -->
        </div>
        <div class="card-body position-relative">
          <!-- Attendance Meter at top-right -->
          <div style="position: absolute; top: 0.75rem; right: 1rem; min-width: 160px; z-index: 1;">
            <div class="progress" style="height: 20px;">
              <div class="progress-bar bg-success" role="progressbar" style="width: 93%;" aria-valuenow="28" aria-valuemin="0" aria-valuemax="30">
                28
              </div>
              <div class="progress-bar bg-danger" role="progressbar" style="width: 7%;" aria-valuenow="2" aria-valuemin="0" aria-valuemax="30">
                2
              </div>
            </div>
            <small class="text-muted d-block text-end" style="font-size: 0.85em;">Present / Absent</small>
          </div>
          <!-- End Attendance Meter -->

          <!-- Circular Attendance Meter for Week -->
          <div class="d-flex align-items-center mt-4">
            <svg width="60" height="60" viewBox="0 0 42 42" class="me-3">
              <circle cx="21" cy="21" r="18" fill="none" stroke="#e9ecef" stroke-width="4"/>
              <circle cx="21" cy="21" r="18" fill="none" stroke="#198754" stroke-width="4"
                stroke-dasharray="25.2 50.4" stroke-dashoffset="0" stroke-linecap="round"/>
              <text x="21" y="25" text-anchor="middle" font-size="13" fill="#198754" font-weight="bold">5/5</text>
            </svg>
            <div>
              <p class="card-text mb-0 fw-semibold">Your Attendance of Week</p>
              <small class="text-muted">Present 5 out of 5 days</small>
            </div>
          </div>
          <!-- End Circular Attendance Meter -->

          <h5 class="card-title mt-4">CLASS 1</h5>
          <p class="card-text">Section A</p>
          <p class="card-text">Total Students: 30</p>
          <p class="card-text">Total Present: 28</p>
          <p class="card-text">Total Absent: 2</p>
        </div>
      </div>
      <!-- Add Attendance Graph Below -->
      <div class="card mb-5">
        <div class="card-header">
          <h6 class="mb-0">Monthly Attendance Graph</h6>
        </div>
        <div class="card-body">
          <canvas id="attendanceChart" height="100"></canvas>
        </div>
      </div>
      <!-- Attendance Search By Day -->
      <div class="card mb-5">
        <div class="card-header">
          <h6 class="mb-0">Attendance Search by Day</h6>
        </div>
        <div class="card-body">
          <form class="row g-3 align-items-center mb-3">
            <div class="col-auto">
              <label for="searchDate" class="col-form-label">Select Date:</label>
            </div>
            <div class="col-auto">
              <input type="date" id="searchDate" class="form-control">
            </div>
            <div class="col-auto">
              <button type="button" class="btn btn-primary" onclick="searchAttendance()">Search</button>
            </div>
          </form>
          <div id="attendanceResult">
            <!-- Result will appear here -->
          </div>
        </div>
      </div>
      <!-- Menu Help Section -->
      <div class="alert alert-info">
        <strong>How to use the menu:</strong>
        <ul class="mb-0">
          <li><b>Dashboard:</b> View your overall attendance and classwork summary.</li>
          <li><b>Profile:</b> See and edit your personal and guardian details.</li>
          <li><b>Attendance:</b> Check your attendance stats, search by day, and view monthly graphs.</li>
          <li><b>Reports:</b> Access assignments, test results, fees, submit assignments, pay fees, and more.</li>
        </ul>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
    // Example data for months and attendance percentage
    const ctx = document.getElementById('attendanceChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['April', 'May', 'June', 'July', 'August'],
        datasets: [{
          label: 'Attendance %',
          data: [91.7, 92.0, 90.0, 95.0, 88.5],
          backgroundColor: '#198754'
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            title: {
              display: true,
              text: 'Percentage (%)'
            }
          }
        }
      }
    });

    // Simple demo function for attendance search
    function searchAttendance() {
      const date = document.getElementById('searchDate').value;
      const resultDiv = document.getElementById('attendanceResult');
      if (!date) {
        resultDiv.innerHTML = '<div class="alert alert-warning">Please select a date.</div>';
        return;
      }
      // Demo: Randomly show present/absent for the selected date
      const isPresent = Math.random() > 0.2;
      resultDiv.innerHTML = `
        <div class="alert alert-${isPresent ? 'success' : 'danger'}">
          Attendance on <strong>${date}</strong>: <b>${isPresent ? 'Present' : 'Absent'}</b>
        </div>
      `;
    }
  </script>
</body>
</html>
